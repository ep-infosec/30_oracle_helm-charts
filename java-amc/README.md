Helm chart to deploy the Java Advanced Management Console
=====
The Java [Advanced Management Console](https://www.oracle.com/java/technologies/advancedmanagementconsole.html) (AMC) offers system administrators greater and easier control in managing Java version compatibility and security updates for desktops within their enterprise and for ISVs with Java-based applications and solutions. AMC is available as part of Java SE subscription, Java SE Advanced and SE Advanced Suite and requires a commercial license for use in production.

The Helm chart in this repository provides a easily deployable containerized version of AMC that uses the [WebLogic Kubernetes Operator](https://oracle.github.io/weblogic-kubernetes-operator/userguide/introduction/introduction/) for deploying and managing an application. This solution can be easily deployed in both cloud and non-cloud environments and leverages scaling functionalities of the operator within a Kubernetes framework. This will address the complexity involved in installing and maintaining the non-containerized AMC without requiring sophisticated IT knowledge.

This repository contains the Helm Chart to facilitate deployment and updation of Containerized AMC.

## Installation of chart
For detailed installation steps and instructions refer to [`Deploy Containerized Advanced Management Console on Kubernetes Environment`](https://docs.oracle.com/en/java/java-components/advanced-management-console/2.20/deploy-guide/deploy-containerized-amc-kubernetes-environment.html#GUID-5FE638FE-AD5D-4605-96E5-3D271309055D) section in the [Containerized Advanced Management Console Deployment Guide](https://docs.oracle.com/en/java/java-components/advanced-management-console/2.20/deploy-guide/).

## Configuration
The following table lists the configurable parameters of the AMC chart, their default values and additional details about usage. Customize the values
based on your requirements.

| Parameter | Description | Default | Additional Detail (if any) |
| ------ | ------ | ------| ------ |
| `namespace` | Kubernetes namespace the AMC domain should be part of | `amc` | |
| `domain` | Domain name of AMC deployment used by the WebLogic Kubernetes Operator for management | `amc-domain` | |
| `image.repo` | Repository for the AMC container image | None | Refer ['Create the AMC Container Image'](https://docs.oracle.com/en/java/java-components/advanced-management-console/2.20/deploy-guide/setup-environment.html#GUID-D3568481-77A0-4ABB-92F5-3046F3A25CC6) section in the Deployment Guide |
| `image.tag` | AMC container image tag | None | |
| `image.pullPolicy` | AMC container image pull policy | `IfNotPresent` | |
| `image.pullSecrets` | For image pull authentication with container registry hosting the AMC container image | None | |
| `weblogicCredentials.secretsName` | Kubernetes Secret containing WebLogic credentials |  `$(domain-name)-weblogic-credentials` | Either of these options: <br> (a) User creates a Kubernetes secret containing username and password as keys in the same namespace beforehand. The name of the secret is passed against secretsName field <br> (b) User provides plain text input against username and password fields. The Kubernetes secret is auto generated by Helm chart. Name of the secret can be optionally passed by the user. If not, the default would be of the form $(domain-name)-weblogic-credentials |
| `weblogicCredentials.username` | Username to be used for WebLogic admin server |  None | |
| `weblogicCredentials.password` | Password to be used for WebLogic admin server |  None | |
| `weblogicSSLCertificateOverride.enabled` | Enable to override the default SSL certificate used by WebLogic server |  `false` | |
| `weblogicSSLCertificateOverride.configmapName` | The name of the Kubernetes ConfigMap containing the jks should be updated against this field.  |  None | The ConfigMap should be created from the jks file in the AMC namespace beforehand |
| `weblogicSSLCertificateOverride.keystore.filename` | Name of the jks file used to create the ConfigMap |  None | |
| `weblogicSSLCertificateOverride.keystore.secretsName` | Kubernetes secret containing password to the keystore file |  `$(domain-name)-weblogic-keystore-credentials` | |
| `weblogicSSLCertificateOverride.keystore.password` | Keystore password in plain text |  `$(domain-name)-weblogic-keystore-credentials` | |
| `weblogicSSLCertificateOverride.keystorealias.alias` | Name of the alias in the jks |  None | |
| `weblogicSSLCertificateOverride.keystorealias.secretsName` | Enable to override the default SSL certificate used by WebLogic server |   `$(domain-name)-weblogic-keystorealias-credentials` | |
| `weblogicSSLCertificateOverride.keystorealias.password` | Keystore alias password in plain text | `$(domain-name)-weblogic-keystorealias-credentials` | |
| `replicaCount` | Number of managed server pods to spin up |  `2` | Should be in the range 2-10 |
| `restartVersion` | An increment in this value forces domain restart and introspect |  `1` | Should be used when there are changes to resources outside the chart(eg. Secrets) |
| `extraEnv.adminServer.JAVA_OPTIONS` |  Java options (for proxy, etc) to be applied to WebLogic admin server containers |  `-Xmx2g-Xms512m - Dweblogic.StdoutDebugEnabled=false` | |
| `extraEnv.adminServer.USER_MEM_ARGS` | User memory arguments to be applied to WebLogic admin server containers  |  `-XX:+UseContainerSupport` | |
| `extraEnv.managedServer.JAVA_OPTIONS` | Java options (for proxy, etc) to be applied to WebLogic managed server containers |  `-Xmx2g-Xms512m - Dweblogic.StdoutDebugEnabled=false` | |
| `extraEnv.managedServer.USER_MEM_ARGS` | User memory arguments to be applied to WebLogic managed server containers |  `-XX:+UseContainerSupport` | |
| `resources.adminServer.limits` | Memory or CPU limit for the admin server containers |  `3Gi` for memory | | 
| `resources.adminServer.requests` | Memory or CPU requests for the admin server containers |  `1Gi` for memory | |
| `resources.managedServer.limits` | Memory or CPU limit for the managed server containers |  `5Gi` for memory | | 
| `resources.managedServer.requests` | Memory or CPU requests for the managed server containers |  `1Gi` for memory | |
| `isVersionUpgrade` | Enable for AMC version upgrades |  `false` | Decides the Deployment update strategy |
| `database.type` | Type of database used for AMC |  `mysql` | Either "mysql" or "oracle" |
| `database.name` | Name of the database used for AMC |  `amc2` |
| `database.credentials.secretsName` | Kubernetes Secret containing username and password to connect to the database |  `$(domain-name)-datasource-credentials` | Either of these options: <br> (a) User creates a Kubernetes secret containing username and password as keys in the same namespace beforehand. The name of the secret is passed against secretsName field. <br> (b) User provides plain text input against username and password fields. The Kubernetes secret is auto generated by Helm chart. Name of the secret can be optionally passed by the user. If not, the default would be of the form $(domain-name)-datasource-credentials |
| `database.credentials.username` | username for the database connection |  None | |
| `database.credentials.password` | password for the database connection |  None | |
| `database.host` | Hostname where the database instance is running |  None | |
| `database.port` | Port number of the database instance |  `3306` | This is the default port for MySQL |
| `database.isOracle11` | Enable to use Oracle 11g as database for AMC |  `false` | Legacy support |
| `database.use_cj_driver_mysql8` | Enables the usage of com.mysql.cj.jdbc.Driver for JDBC communication to database |  `false` |  To be enabled only if using MySQL8 and WLS 12.2.1.4 |
| `nodePort.enabled` | Enable for NodePort service | `false` | Both AMC WebUI console and WLS Admin Server console would be accessible on enabling this service |
| `nodePort.adminServer` | Port number exposing WebLogic admin server interface for access outside cluster |  Random port assignment | |
| `nodePort.managedServer` | Port number exposing AMC interface for access outside cluster |  Random port assignment | |
| `loadBalancer.enabled` | Enable for LoadBalancer service | `false` | Only AMC WebUI console would be accessible on enabling this service |
| `loadBalancer.port` | Port number for Load Balancer to expose AMC interface | `8002` | |
| `loadBalancer.annotations` | Annotations for the LoadBalancer service |  None | |
| `mailServer.enabled` | Enable for configuring mail server | `false` | |
| `mailServer.properties` | Properties for the mail server |  None | |
| `mailServer.credentials.secretsName`  | Kubernetes Secret containing username and password to connect to the Mail Server | `$(domain-name)-mailserver-credentials` | Either of these options: <br> (a) User creates a Kubernetes secret containing username and password as keys in the same namespace beforehand. The name of the secret is passed against secretsName field. <br> (b) User provides plain text input against username and password fields. The Kubernetes secret is auto generated by Helm chart. Name of the secret can be optionally passed by the user. If not, the default would be of the form $(domain-name)-mailserver-credentials |
| `mailServer.credentials.username`  | username for the mail server connection |  None | |
| `mailServer.credentials.password`  | password for the mail server connection |  None | |
| `ldap.enabled`  | Enable for configuring LDAP Server |  `false` | |
| `ldap.credentials.secretsName`  | Kubernetes Secret containing password to connect to the LDAP Server | `$(domain-name)-ldap-credentials` | Either of these options: <br> (a) User creates a Kubernetes secret containing password as key in the same namespace beforehand. The name of the secret is passed against secretsName field. <br> (b) User provides plain text input against password field. The Kubernetes secret is auto generated by Helm chart. Name of the secret can be optionally passed by the user. If not, the default would be of the form $(domain-name)-ldap-credentials |
| `ldap.credentials.password`  | password for the LDAP Server connection |  `false` | |
| `ldap.host`  | Host name of the LDAP server |  None | |
| `ldap.port`  | Port number of the LDAP server |  `389` | |
| `ldap.enableSSL`  | Enable for SSL connection to LDAP server |  `false` | |
| `ldap.principal`  | LDAP principal |  None | |
| `ldap.userbaseDN`  | Base DN for user |  None | |
| `ldap.groupbaseDN`  | Base DN for group |  None | |

